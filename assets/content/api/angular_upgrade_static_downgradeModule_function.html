<div class="docs-api"><header class="docs-reference-header"><span class="docs-reference-category">@angular/upgrade/static</span><div class="docs-reference-title"><div><h1>downgradeModule</h1><div class="docs-api-item-label type-function full">函数</div></div><a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/blob/main/packages/upgrade/static/src/downgrade_module.ts#L139-L141" title="View source" aria-label="View source"><i role="presentation" aria-hidden="true" class="material-symbols-outlined">代码</i></a></div><section class="docs-reference-description"><p>一个辅助函数，用于创建一个 AngularJS 模块，该模块可以在需要实例化 <a href="/api/upgrade/static/downgradeComponent"><code>降级组件</code></a> 时“按需”（可能是惰性地）引导 Angular 模块。</p></section></header><div class="docs-reference-section docs-reference-api-section"><h2 id="api" class="docs-reference-section-heading"><a href="#api" aria-label="Link to API section" tabindex="-1">API</a></h2><div class="docs-code"><pre class="docs-mini-scroll-track"><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0">  <code>
    <button aria-describedby="jump-msg" type="button" class="line " member-id="downgradeModule_0"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/Type">Type</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"><a href="/api/core/NgModuleRef">NgModuleRef</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button><button aria-describedby="jump-msg" type="button" class="line shiki-deprecated" member-id="downgradeModule_1"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/NgModuleFactory">NgModuleFactory</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></button>
  </code>
  </pre></pre></div></div><div class="docs-reference-members"><div id="downgradeModule_0" class="docs-reference-member-card"><header class="docs-reference-card-header"><code><div><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downgradeModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">|</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> StaticProvider</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">NgModuleRef</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;&gt;))</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre></div></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item "><div class="docs-function-definition"><p>一个辅助函数，用于创建一个 AngularJS 模块，该模块可以在需要实例化 <a href="/api/upgrade/static/downgradeComponent"><code>降级组件</code></a> 时“按需”（可能是惰性地）引导 Angular 模块。</p>
<p><em>用于支持预先编译的混合升级应用的 <a href="api?query=upgrade/static">upgrade/static</a> 库的一部分。</em></p>
<p>它允许惰性地加载/引导混合应用的 Angular 部分，而无需预先支付成本。例如，你可以拥有一个 AngularJS 应用，该应用对特定路由使用 Angular，并且仅在用户访问这些路由之一时才实例化 Angular 模块。</p>
<p>Angular 模块将引导一次（首次请求时），并且从那时起将使用相同的引用。</p>
<p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 需要 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>、<code><a href="/api/core/NgModule">NgModule</a></code> 类或函数：</p>

    <ul class="docs-list">
      <li><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>：如果传递 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>，它将用于实例化一个模块，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a>。
注意：此参数类型已弃用。请提供 <code><a href="/api/core/NgModule">NgModule</a></code> 类或引导函数来代替。</li>
<li><code><a href="/api/core/NgModule">NgModule</a></code> 类：如果传递 NgModule 类，它将用于实例化一个模块，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a>。</li>
<li><code>Function</code>：如果传递一个函数，则期望它返回一个 Promise，求解为 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code>。调用该函数时会传入一个额外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 数组，这些提供者应可从返回的 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code> 的 <code><a href="/api/core/Injector">Injector</a></code> 中获得。</li>

    </ul>
    <p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 返回所创建的 AngularJS 包装器模块的名称。你可以使用它在你的主 AngularJS 模块中声明依赖。</p>
<p>{@example upgrade/static/ts/lite/module.ts region="basic-how-to"}</p>
<p>有关如何使用 <code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 的更多详细信息，请参阅<a href="https://angular.io/guide/upgrade">升级以获得性能</a>。</p></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">moduleOrBootstrapFn</span><code><a href="/api/core/Type">Type</a>&lt;T&gt; | ((extraProviders: <a href="/api/core/StaticProvider">StaticProvider</a>[]) =&gt; Promise&lt;<a href="/api/core/NgModuleRef">NgModuleRef</a>&lt;T&gt;&gt;)</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div><div id="downgradeModule_1" class="docs-reference-member-card"><header class="docs-reference-card-header"><code><div><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> downgradeModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">moduleOrBootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> NgModuleFactory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">T</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span></code></pre></div></code></header><div class="docs-reference-card-body"><div class="docs-reference-card-item docs-reference-card-item-deprecated"><div class="docs-function-definition"><p>一个辅助函数，用于创建一个 AngularJS 模块，该模块可以在需要实例化 <a href="/api/upgrade/static/downgradeComponent"><code>降级组件</code></a> 时“按需”（可能是惰性地）引导 Angular 模块。</p>
<p><em>用于支持预先编译的混合升级应用的 <a href="api?query=upgrade/static">upgrade/static</a> 库的一部分。</em></p>
<p>它允许惰性地加载/引导混合应用的 Angular 部分，而无需预先支付成本。例如，你可以拥有一个 AngularJS 应用，该应用对特定路由使用 Angular，并且仅在用户访问这些路由之一时才实例化 Angular 模块。</p>
<p>Angular 模块将引导一次（首次请求时），并且从那时起将使用相同的引用。</p>
<p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 需要 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>、<code><a href="/api/core/NgModule">NgModule</a></code> 类或函数：</p>

    <ul class="docs-list">
      <li><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>：如果传递 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>，它将用于实例化一个模块，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a>。
注意：此参数类型已弃用。请提供 <code><a href="/api/core/NgModule">NgModule</a></code> 类或引导函数来代替。</li>
<li><code><a href="/api/core/NgModule">NgModule</a></code> 类：如果传递 NgModule 类，它将用于实例化一个模块，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a>。</li>
<li><code>Function</code>：如果传递一个函数，则期望它返回一个 Promise，求解为 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code>。调用该函数时会传入一个额外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 数组，这些提供者应可从返回的 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code> 的 <code><a href="/api/core/Injector">Injector</a></code> 中获得。</li>

    </ul>
    <p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 返回所创建的 AngularJS 包装器模块的名称。你可以使用它在你的主 AngularJS 模块中声明依赖。</p>
<p>{@example upgrade/static/ts/lite/module.ts region="basic-how-to"}</p>
<p>有关如何使用 <code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 的更多详细信息，请参阅<a href="https://angular.io/guide/upgrade">升级以获得性能</a>。</p></div><div><div class="docs-deprecation-message"><span class="docs-param-keyword docs-deprecated">@deprecated</span><span><p>不建议将 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code> 作为 <code><a href="/api/upgrade/static/downgradeModule">downgradeModule</a></code> 函数参数传递，请改为传递 NgModule 类引用。</p>
</span></div></div><div class="docs-param-group"><span class="docs-param-keyword">@param</span><span class="docs-param-name">moduleOrBootstrapFn</span><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a>&lt;T&gt;</code><div class="docs-parameter-description"></div></div><div class="docs-return-type"><span class="docs-param-keyword">@returns</span><code>string</code></div></div></div></div></div><div class="docs-reference-section"><h2 id="description" class="docs-reference-section-heading"><a href="#description" aria-label="Link to Description section" tabindex="-1">说明</a></h2><div><p>一个辅助函数，用于创建一个 AngularJS 模块，该模块可以在需要实例化 <a href="/api/upgrade/static/downgradeComponent"><code>降级组件</code></a> 时“按需”（可能是惰性地）引导 Angular 模块。</p>
<p><em>用于支持预先编译的混合升级应用的 <a href="api?query=upgrade/static">upgrade/static</a> 库的一部分。</em></p>
<p>它允许惰性地加载/引导混合应用的 Angular 部分，而无需预先支付成本。例如，你可以拥有一个 AngularJS 应用，该应用对特定路由使用 Angular，并且仅在用户访问这些路由之一时才实例化 Angular 模块。</p>
<p>Angular 模块将引导一次（首次请求时），并且从那时起将使用相同的引用。</p>
<p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 需要 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>、<code><a href="/api/core/NgModule">NgModule</a></code> 类或函数：</p>

    <ul class="docs-list">
      <li><code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>：如果传递 <code><a href="/api/core/NgModuleFactory">NgModuleFactory</a></code>，它将用于实例化一个模块，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModuleFactory"><code>bootstrapModuleFactory()</code></a>。
注意：此参数类型已弃用。请提供 <code><a href="/api/core/NgModule">NgModule</a></code> 类或引导函数来代替。</li>
<li><code><a href="/api/core/NgModule">NgModule</a></code> 类：如果传递 NgModule 类，它将用于实例化一个模块，使用 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 的 <a href="/api/core/PlatformRef#bootstrapModule"><code>bootstrapModule()</code></a>。</li>
<li><code>Function</code>：如果传递一个函数，则期望它返回一个 Promise，求解为 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code>。调用该函数时会传入一个额外的 <a href="/api/core/StaticProvider"><code>Providers</code></a> 数组，这些提供者应可从返回的 <code><a href="/api/core/NgModuleRef">NgModuleRef</a></code> 的 <code><a href="/api/core/Injector">Injector</a></code> 中获得。</li>

    </ul>
    <p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 返回所创建的 AngularJS 包装器模块的名称。你可以使用它在你的主 AngularJS 模块中声明依赖。</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {platformBrowserDynamic} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/platform-browser-dynamic'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {downgradeComponent, downgradeModule, UpgradeComponent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/upgrade/static'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// The function that will bootstrap the Angular module (when/if necessary).</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// (This would be omitted if we provided an `NgModuleFactory` directly.)</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ng2BootstrapFn</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">extraProviders</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> <a href="/api/core/StaticProvider">StaticProvider</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  platformBrowserDynamic</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(extraProviders).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">bootstrapModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(MyLazyAngularModule);</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">// This AngularJS module represents the AngularJS pieces of the application.</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> myMainAngularJsModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> angular.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'myMainAngularJsModule'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, [</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // We declare a dependency on the "downgraded" Angular module.</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  <a href="/api/upgrade/static/downgradeModule">downgradeModule</a></span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(ng2BootstrapFn),</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // or</span></span><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  // downgradeModule(MyLazyAngularModuleFactory)</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">]);</span></span></code></pre>
        </pre>
      </div>
    <p>有关如何使用 <code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 的更多详细信息，请参阅<a href="https://angular.io/guide/upgrade">升级以获得性能</a>。</p></div></div><div class="docs-reference-section"><h2 id="usage-notes" class="docs-reference-section-heading"><a href="#usage-notes" aria-label="Link to Usage Notes section" tabindex="-1">用法说明</a></h2><div><p>除了 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 之外，你可以像往常一样使用 <code>upgrade/static</code> 助手的其余部分来构建混合应用。请注意，在降级模块引导之前（即通过实例化降级组件），Angular 部分（例如，降级服务）将不可用。</p>
<div class="docs-alert docs-alert-important">

<p>你不能在同一个混合应用中使用 <code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 和 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code>。<br>
  请使用其中之一。</p>
</div>


      <h3 id="differences-with-upgrademodule" class="docs-reference-section-heading docs-reference-section-heading--sub">
        <a href="#differences-with-upgrademodule" aria-label="Link to Differences with `UpgradeModule` section" tabindex="-1">与 <code data-skip-anchor>UpgradeModule</code> 的区别
        </a>
      </h3>
    <p>除了它们不同的 API 之外，<code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 和 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 之间还有两个重要的内部区别，这些区别会影响混合应用的表现：</p>

      <ol class="docs-ordered-list">
        <li>与 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 不同，<code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 不会在 <a href="/api/core/NgZone"><code>Angular Zone</code></a> 内引导主 AngularJS 模块。</li>
<li>与 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 不同，当在应用的 Angular 部分检测到更改时，<code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 不会自动运行 <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest">$digest()</a>。</li>

      </ol>
      <p>这意味着使用 <code><a href="/api/upgrade/static/UpgradeModule">UpgradeModule</a></code> 的应用将更频繁地运行变更检测，以确保两个框架都得到关于可能更改的正确通知。这将不可避免地导致比必要的更多的变更检测运行。</p>
<p><code><a href="/api/upgrade/static/downgradeModule()">downgradeModule()</a></code> 另一方面，并没有尝试将两个变更检测体系紧密地联系在一起，而是将显式的变更检测运行限制在它认为必要的情况下（例如，当降级组件的输入发生更改时）。这提高了性能，尤其是在变更检测密集型应用中，但需要开发人员根据需要手动通知每个框架。</p>
<p>有关差异及其影响的更详细讨论，请参阅 <a href="https://angular.io/guide/upgrade">升级以获得性能</a>。</p>
<div class="docs-alert docs-alert-helpful">

<p>你可以使用 <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$apply">scope.$apply(...)</a> 或 <a href="https://docs.angularjs.org/api/ng/type/$rootScope.Scope#$digest">$rootScope.$digest()</a> 在 AngularJS 中手动触发变更检测运行。</p>
<p>你可以使用 <a href="/api/core/NgZone#run"><code>* ngZone.run(...)</code></a> 在 Angular 中手动触发变更检测运行。</p>
</div>


      <h3 id="downgrading-multiple-modules" class="docs-reference-section-heading docs-reference-section-heading--sub">
        <a href="#downgrading-multiple-modules" aria-label="Link to Downgrading multiple modules section" tabindex="-1">降级多个模块</a>
      </h3>
    <p>可以降级多个模块并将它们包含在 AngularJS 应用中。在这种情况下，当需要实例化关联的降级组件或可注入对象时，将引导每个降级模块。</p>
<p>降级多个模块时要记住的事项：</p>

    <ul class="docs-list">
      <li><p>每个降级的组件/可注入对象都需要显式地与一个降级的模块关联。有关更多详细信息，请参阅 <code><a href="/api/upgrade/static/downgradeComponent()">downgradeComponent()</a></code> 和 <code><a href="/api/upgrade/static/downgradeInjectable()">downgradeInjectable()</a></code>。</p>
</li>
<li><p>如果希望在所有降级模块之间共享某些可注入对象，则可以在创建 <code><a href="/api/core/PlatformRef">PlatformRef</a></code> 时将它们作为 <code><a href="/api/core/StaticProvider">StaticProvider</a></code> 提供（例如，通过 <code><a href="/api/platform-browser/platformBrowser">platformBrowser</a></code> 或 <code>platformBrowserDynamic</code>）。</p>
</li>
<li><p>当使用 <a href="/api/core/PlatformRef#bootstrapmodule"><code><code>bootstrapModule()</code></code></a> 或 <a href="/api/core/PlatformRef#bootstrapmodulefactory"><code><code>bootstrapModuleFactory()</code></code></a> 引导降级模块时，每个模块都被视为“根”模块。因此，将为在 <code>"root"</code> 中提供的每个可注入对象创建一个新实例（通过 <a href="/api/core/Injectable#providedIn"><code>providedIn</code></a>）。如果这不是你的本意，你可以拥有一个共享模块（它将充当“根”模块），并使用该模块的注入器创建所有降级模块：</p>

      <div class="docs-code" role="group">
        <pre class="docs-mini-scroll-track">          <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"></span></code></pre>
        </pre>
      </div>
    </li>

    </ul>
    <p>let rootInjectorPromise: Promise<injector>| null = null;
const getRootInjector = (extraProviders: StaticProvider[]) =&gt; {
  if (!rootInjectorPromise) {
    rootInjectorPromise = platformBrowserDynamic(extraProviders)
      .bootstrapModule(Ng2RootModule)
      .then((moduleRef) =&gt; moduleRef.injector);
  }
  return rootInjectorPromise;
};</injector></p>
<p>const downgradedNg2AModule = downgradeModule(async (extraProviders: StaticProvider[]) =&gt; {
  const rootInjector = await getRootInjector(extraProviders);
  const moduleAFactory = await rootInjector.get(Compiler).compileModuleAsync(Ng2AModule);
  return moduleAFactory.create(rootInjector);
});
const downgradedNg2BModule = downgradeModule(async (extraProviders: StaticProvider[]) =&gt; {
  const rootInjector = await getRootInjector(extraProviders);
  const moduleBFactory = await rootInjector.get(Compiler).compileModuleAsync(Ng2BModule);
  return moduleBFactory.create(rootInjector);
});
const appModule = angular
  .module('exampleAppModule', [downgradedNg2AModule, downgradedNg2BModule, downgradedNg2CModule])
```</p>
</div></div></div>