<div class="docs-decorative-header-container">
      <div class="docs-decorative-header">
        <div class="docs-header-content">
          <docs-breadcrumb></docs-breadcrumb>

          
  <!-- Page title -->
  <div class="docs-page-title">
    <h1 tabindex="-1">Angular 中的表单</h1>
    <a class="docs-github-links" target="_blank" href="https://github.com/angular/angular/edit/main/adev/src/content/guide/forms/overview.md" title="Edit this page" aria-label="Edit this page">
      <!-- Pencil -->
      <docs-icon role="presentation">edit</docs-icon>
    </a>
  </div>

          <p><!-- markdownlint-disable-line -->使用表单处理用户输入是许多常用应用的基础。</p>
        </div>

        <!-- illustration -->
        <svg width="273" height="192" viewBox="0 0 273 192" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M196.829 31.3324H19.6283C16.1156 31.3324 13.268 34.18 13.268 37.6928V136.836C13.268 140.349 16.1156 143.196 19.6283 143.196H196.829C200.342 143.196 203.189 140.349 203.189 136.836V37.6928C203.189 34.18 200.342 31.3324 196.829 31.3324Z" fill="white" />
  <path d="M196.844 31.7092C200.145 31.7092 202.828 34.392 202.828 37.6928V136.851C202.828 140.152 200.145 142.835 196.844 142.835H19.6283C16.3276 142.835 13.6448 140.152 13.6448 136.851V37.6928C13.6448 34.392 16.3276 31.7092 19.6283 31.7092H196.844ZM196.844 30.9556H19.6283C15.9056 30.9556 12.8912 33.97 12.8912 37.6928V136.851C12.8912 140.574 15.9056 143.588 19.6283 143.588H196.844C200.567 143.588 203.581 140.574 203.581 136.851V37.6928C203.581 33.97 200.567 30.9556 196.844 30.9556Z" fill="var(--primary-contrast)" />
  <path d="M13.3581 41.1293H105.011V143.076H19.8993C16.2971 143.076 13.3581 140.152 13.3581 136.535V41.1143V41.1293Z" fill="#EFEFF1" stroke="var(--primary-contrast)" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M13.268 41.1745V35.3719C13.268 33.1563 15.0766 31.3477 17.2922 31.3477H199.03C201.215 31.3477 203.024 33.1261 203.054 35.2965L203.174 41.1745H13.2529H13.268Z" fill="white" />
  <path d="M199.045 31.7092C201.019 31.7092 202.662 33.3219 202.692 35.2963L202.798 40.7976H13.6448V35.3717C13.6448 33.3521 15.2876 31.7243 17.2922 31.7243H199.03M199.03 30.9707H17.2922C14.8506 30.9707 12.8912 32.9451 12.8912 35.3717V41.5512H203.566L203.446 35.2813C203.4 32.8848 201.441 30.9556 199.045 30.9556L199.03 30.9707Z" fill="black" />
  <path d="M57.338 89.0128C64.9795 89.0128 71.174 82.8182 71.174 75.1767C71.174 67.5353 64.9795 61.3407 57.338 61.3407C49.6966 61.3407 43.502 67.5353 43.502 75.1767C43.502 82.8182 49.6966 89.0128 57.338 89.0128Z" fill="#F637E3" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M57.3382 77.1963C60.0685 77.1963 62.2818 74.9829 62.2818 72.2527C62.2818 69.5224 60.0685 67.3091 57.3382 67.3091C54.608 67.3091 52.3947 69.5224 52.3947 72.2527C52.3947 74.9829 54.608 77.1963 57.3382 77.1963Z" fill="white" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M57.3382 80.3315C54.2033 80.3315 48.1594 81.9593 47.5264 84.9284C50.0284 87.4605 53.51 89.028 57.3382 89.028C61.1665 89.028 64.6481 87.4605 67.1501 84.9284C66.502 81.9593 60.4431 80.3315 57.3382 80.3315Z" fill="white" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M15.3176 162.262V154.515H99.3737V164.357" stroke="var(--primary-contrast)" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M2.43108 162.639H28.2041C28.9728 162.639 29.6058 163.272 29.6058 164.041V189.814C29.6058 190.583 28.9728 191.216 28.2041 191.216H2.43108C1.66241 191.216 1.02939 190.583 1.02939 189.814V164.041C1.02939 163.272 1.66241 162.639 2.43108 162.639Z" fill="#5C44E4" />
  <path d="M28.2041 163.016C28.7618 163.016 29.229 163.468 29.229 164.041V189.814C29.229 190.371 28.7768 190.839 28.2041 190.839H2.43111C1.87344 190.839 1.40621 190.387 1.40621 189.814V164.041C1.40621 163.483 1.85837 163.016 2.43111 163.016H28.2041ZM28.2041 162.262H2.43111C1.45143 162.262 0.652618 163.061 0.652618 164.041V189.814C0.652618 190.793 1.45143 191.592 2.43111 191.592H28.2041C29.1838 191.592 29.9826 190.793 29.9826 189.814V164.041C29.9826 163.061 29.1838 162.262 28.2041 162.262Z" fill="black" />
  <path d="M44.4514 162.639H70.2244C70.9931 162.639 71.6261 163.272 71.6261 164.041V189.814C71.6261 190.583 70.9931 191.216 70.2244 191.216H44.4514C43.6828 191.216 43.0497 190.583 43.0497 189.814V164.041C43.0497 163.272 43.6828 162.639 44.4514 162.639Z" fill="#F637E3" />
  <path d="M70.2396 163.016C70.7972 163.016 71.2645 163.468 71.2645 164.041V189.814C71.2645 190.371 70.8123 190.839 70.2396 190.839H44.4666C43.9089 190.839 43.4417 190.387 43.4417 189.814V164.041C43.4417 163.483 43.8938 163.016 44.4666 163.016H70.2396ZM70.2396 162.262H44.4666C43.4869 162.262 42.6881 163.061 42.6881 164.041V189.814C42.6881 190.793 43.4869 191.592 44.4666 191.592H70.2396C71.2192 191.592 72.0181 190.793 72.0181 189.814V164.041C72.0181 163.061 71.2192 162.262 70.2396 162.262Z" fill="black" />
  <path d="M86.4872 162.639H112.26C113.029 162.639 113.662 163.272 113.662 164.041V189.814C113.662 190.583 113.029 191.216 112.26 191.216H86.4872C85.7186 191.216 85.0856 190.583 85.0856 189.814V164.041C85.0856 163.272 85.7186 162.639 86.4872 162.639Z" fill="#F11653" />
  <path d="M112.26 163.016C112.818 163.016 113.285 163.468 113.285 164.041V189.814C113.285 190.371 112.833 190.839 112.26 190.839H86.4873C85.9296 190.839 85.4624 190.387 85.4624 189.814V164.041C85.4624 163.483 85.9145 163.016 86.4873 163.016H112.26ZM112.26 162.262H86.4873C85.5076 162.262 84.7088 163.061 84.7088 164.041V189.814C84.7088 190.793 85.5076 191.592 86.4873 191.592H112.26C113.24 191.592 114.039 190.793 114.039 189.814V164.041C114.039 163.061 113.24 162.262 112.26 162.262Z" fill="black" />
  <path d="M57.3383 162.262V141.975" stroke="var(--primary-contrast)" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M21.1354 38.1451C22.1843 38.1451 23.0345 37.2948 23.0345 36.246C23.0345 35.1972 22.1843 34.3469 21.1354 34.3469C20.0866 34.3469 19.2364 35.1972 19.2364 36.246C19.2364 37.2948 20.0866 38.1451 21.1354 38.1451Z" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M28.3848 38.1451C29.4336 38.1451 30.2839 37.2948 30.2839 36.246C30.2839 35.1972 29.4336 34.3469 28.3848 34.3469C27.336 34.3469 26.4857 35.1972 26.4857 36.246C26.4857 37.2948 27.336 38.1451 28.3848 38.1451Z" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M71.6416 118.207H30.9624V119.835H71.6416V118.207Z" fill="white" />
  <path d="M71.2648 118.599V119.488H31.3392V118.599H71.2648ZM72.0184 117.845H30.5856V120.242H72.0184V117.845Z" fill="black" />
  <path d="M83.7142 110.37H30.9624V111.997H83.7142V110.37Z" fill="white" />
  <path d="M83.3524 110.746V111.636H31.3392V110.746H83.3524ZM84.106 109.993H30.5856V112.389H84.106V109.993Z" fill="black" />
  <path d="M83.7142 102.517H30.9624V104.145H83.7142V102.517Z" fill="white" />
  <path d="M83.3524 102.894V103.783H31.3392V102.894H83.3524ZM84.106 102.14H30.5856V104.537H84.106V102.14Z" fill="black" />
  <path d="M179.903 88.395H119.043C117.969 88.395 117.098 89.2654 117.098 90.3392V122.699C117.098 123.772 117.969 124.643 119.043 124.643H179.903C180.977 124.643 181.847 123.772 181.847 122.699V90.3392C181.847 89.2654 180.977 88.395 179.903 88.395Z" fill="#EFEFF1" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M181.471 66.7817H117.475V77.0457H181.471V66.7817Z" fill="#5C44E4" />
  <path d="M181.079 67.1583V76.6687H117.837V67.1583H181.079ZM181.832 66.4047H117.083V77.4223H181.832V66.4047Z" fill="black" />
  <path d="M174.176 73.775C175.624 73.775 176.798 72.6009 176.798 71.1525C176.798 69.7041 175.624 68.53 174.176 68.53C172.727 68.53 171.553 69.7041 171.553 71.1525C171.553 72.6009 172.727 73.775 174.176 73.775Z" stroke="white" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M178.381 75.2974L176.105 73.0215" stroke="white" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M35.6345 38.1451C36.6833 38.1451 37.5335 37.2948 37.5335 36.246C37.5335 35.1972 36.6833 34.3469 35.6345 34.3469C34.5857 34.3469 33.7354 35.1972 33.7354 36.246C33.7354 37.2948 34.5857 38.1451 35.6345 38.1451Z" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <g style="mix-blend-mode: multiply;">
    <path d="M232.609 80.9193C253.644 80.9193 270.696 63.8672 270.696 42.8325C270.696 21.7978 253.644 4.74573 232.609 4.74573C211.575 4.74573 194.523 21.7978 194.523 42.8325C194.523 63.8672 211.575 80.9193 232.609 80.9193Z" fill="var(--senary-contrast)" />
  </g>
  <path d="M227.606 75.855C248.432 75.855 265.316 58.9716 265.316 38.145C265.316 17.3184 248.432 0.435028 227.606 0.435028C206.779 0.435028 189.896 17.3184 189.896 38.145C189.896 58.9716 206.779 75.855 227.606 75.855Z" fill="#F11653" />
  <path d="M227.606 0.811854C248.194 0.811854 264.939 17.5568 264.939 38.145C264.939 58.7333 248.194 75.4782 227.606 75.4782C207.018 75.4782 190.273 58.7333 190.273 38.145C190.273 17.5568 207.018 0.811854 227.606 0.811854ZM227.606 0.0582581C206.565 0.0582581 189.519 17.1046 189.519 38.145C189.519 59.1854 206.565 76.2318 227.606 76.2318C248.646 76.2318 265.693 59.1854 265.693 38.145C265.693 17.1046 248.646 0.0582581 227.606 0.0582581Z" fill="black" />
  <path d="M207.244 38.7931L212.217 33.2919L222.105 44.1587L242.994 21.1288L247.968 26.6452L222.105 55.1763L207.244 38.7931Z" fill="white" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <g style="mix-blend-mode: multiply;">
    <path d="M145.268 158.102L161.666 156.821L131.492 140.167L139.827 173.611L145.268 158.102Z" fill="var(--senary-contrast)" />
  </g>
  <path d="M140.58 153.4L156.979 152.134L126.805 135.464L135.124 168.909L140.58 153.4Z" fill="white" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <g style="mix-blend-mode: multiply;">
    <path d="M268.511 117.288H204.304C202.69 117.288 201.38 118.597 201.38 120.212V184.418C201.38 186.033 202.69 187.342 204.304 187.342H268.511C270.126 187.342 271.435 186.033 271.435 184.418V120.212C271.435 118.597 270.126 117.288 268.511 117.288Z" fill="var(--senary-contrast)" />
  </g>
  <path d="M261.276 110.415H197.07C195.663 110.415 194.523 111.555 194.523 112.962V177.168C194.523 178.575 195.663 179.716 197.07 179.716H261.276C262.683 179.716 263.823 178.575 263.823 177.168V112.962C263.823 111.555 262.683 110.415 261.276 110.415Z" fill="#F11653" />
  <path d="M261.276 110.792C262.467 110.792 263.447 111.771 263.447 112.962V177.168C263.447 178.359 262.467 179.339 261.276 179.339H197.07C195.879 179.339 194.899 178.359 194.899 177.168V112.962C194.899 111.771 195.879 110.792 197.07 110.792H261.276ZM261.276 110.038H197.07C195.457 110.038 194.146 111.349 194.146 112.962V177.168C194.146 178.781 195.457 180.092 197.07 180.092H261.276C262.889 180.092 264.2 178.781 264.2 177.168V112.962C264.2 111.349 262.889 110.038 261.276 110.038Z" fill="black" />
  <path d="M253.951 102.713H189.745C188.13 102.713 186.821 104.022 186.821 105.637V169.844C186.821 171.458 188.13 172.768 189.745 172.768H253.951C255.566 172.768 256.875 171.458 256.875 169.844V105.637C256.875 104.022 255.566 102.713 253.951 102.713Z" fill="white" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M201.923 114.002H241.773C243.22 114.002 244.411 115.178 244.411 116.64V123.784C244.411 125.231 243.235 126.406 241.788 126.406H201.938C200.491 126.406 199.301 125.231 199.301 123.769V116.625C199.301 115.178 200.476 113.987 201.938 113.987L201.923 114.002Z" fill="white" />
  <path d="M241.773 114.756C242.813 114.756 243.642 115.6 243.642 116.625V123.769C243.642 124.809 242.798 125.638 241.773 125.638H201.923C200.883 125.638 200.054 124.794 200.054 123.769V116.625C200.054 115.585 200.898 114.756 201.923 114.756H241.773ZM241.773 113.248H201.923C200.069 113.248 198.547 114.771 198.547 116.625V123.769C198.547 125.623 200.069 127.145 201.923 127.145H241.773C243.627 127.145 245.15 125.623 245.15 123.769V116.625C245.15 114.771 243.627 113.248 241.773 113.248Z" fill="var(--primary-contrast)" />
  <path d="M210.348 117.86H205.676V122.533H210.348V117.86Z" fill="white" />
  <path d="M209.61 118.614V121.779H206.445V118.614H209.61ZM210.62 117.107H205.435C205.164 117.107 204.938 117.333 204.938 117.604V122.789C204.938 123.06 205.164 123.286 205.435 123.286H210.62C210.891 123.286 211.117 123.06 211.117 122.789V117.604C211.117 117.333 210.891 117.107 210.62 117.107Z" fill="var(--primary-contrast)" />
  <path d="M215.458 119.157H237.342" stroke="var(--primary-contrast)" stroke-width="1.86842" stroke-miterlimit="10" />
  <path d="M201.923 131.546H241.773C243.22 131.546 244.396 132.721 244.396 134.168V141.312C244.396 142.759 243.22 143.935 241.773 143.935H201.923C200.476 143.935 199.286 142.759 199.286 141.297V134.153C199.286 132.706 200.461 131.516 201.923 131.516V131.546Z" fill="white" />
  <path d="M241.773 132.299C242.813 132.299 243.642 133.143 243.642 134.168V141.312C243.642 142.352 242.798 143.181 241.773 143.181H201.923C200.883 143.181 200.054 142.337 200.054 141.312V134.168C200.054 133.128 200.898 132.299 201.923 132.299H241.773ZM241.773 130.792H201.923C200.069 130.792 198.547 132.314 198.547 134.168V141.312C198.547 143.166 200.069 144.688 201.923 144.688H241.773C243.627 144.688 245.15 143.166 245.15 141.312V134.168C245.15 132.314 243.627 130.792 241.773 130.792Z" fill="var(--primary-contrast)" />
  <path d="M210.348 135.404H205.676V140.076H210.348V135.404Z" fill="#DD0031" />
  <path d="M209.61 136.158V139.323H206.445V136.158H209.61ZM210.62 134.65H205.435C205.164 134.65 204.938 134.877 204.938 135.148V140.333C204.938 140.604 205.164 140.83 205.435 140.83H210.62C210.891 140.83 211.117 140.604 211.117 140.333V135.148C211.117 134.877 210.891 134.65 210.62 134.65Z" fill="var(--primary-contrast)" />
  <path d="M215.458 136.7H237.342" stroke="var(--primary-contrast)" stroke-width="1.86842" stroke-miterlimit="10" />
  <path d="M201.923 149.089H241.773C243.22 149.089 244.396 150.265 244.396 151.712V158.856C244.396 160.303 243.22 161.479 241.773 161.479H201.923C200.476 161.479 199.301 160.303 199.301 158.856V151.712C199.301 150.265 200.476 149.074 201.938 149.074L201.923 149.089Z" fill="white" />
  <path d="M241.773 149.843C242.813 149.843 243.642 150.687 243.642 151.712V158.856C243.642 159.896 242.798 160.725 241.773 160.725H201.923C200.883 160.725 200.054 159.881 200.054 158.856V151.712C200.054 150.672 200.898 149.843 201.923 149.843H241.773ZM241.773 148.336H201.923C200.069 148.336 198.547 149.858 198.547 151.712V158.856C198.547 160.71 200.069 162.232 201.923 162.232H241.773C243.627 162.232 245.15 160.71 245.15 158.856V151.712C245.15 149.858 243.627 148.336 241.773 148.336Z" fill="var(--primary-contrast)" />
  <path d="M210.348 152.948H205.676V157.62H210.348V152.948Z" fill="white" />
  <path d="M209.61 153.701V156.867H206.445V153.701H209.61ZM210.62 152.194H205.435C205.164 152.194 204.938 152.42 204.938 152.692V157.876C204.938 158.148 205.164 158.374 205.435 158.374H210.62C210.891 158.374 211.117 158.148 211.117 157.876V152.692C211.117 152.42 210.891 152.194 210.62 152.194Z" fill="var(--primary-contrast)" />
  <path d="M215.458 154.244H237.342" stroke="var(--primary-contrast)" stroke-width="1.86842" stroke-miterlimit="10" />
  <path d="M241.773 113.248H201.908C200.044 113.248 198.532 114.76 198.532 116.625V123.784C198.532 125.648 200.044 127.16 201.908 127.16H241.773C243.638 127.16 245.149 125.648 245.149 123.784V116.625C245.149 114.76 243.638 113.248 241.773 113.248Z" fill="#EFEFF1" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M205.435 117.484H210.62C210.62 117.484 210.74 117.544 210.74 117.604V122.789C210.74 122.789 210.68 122.91 210.62 122.91H205.435C205.435 122.91 205.314 122.849 205.314 122.789V117.604C205.314 117.604 205.375 117.484 205.435 117.484Z" fill="#5C44E4" />
  <path d="M210.363 117.86V122.533H205.691V117.86H210.363ZM210.62 117.107H205.435C205.164 117.107 204.938 117.333 204.938 117.604V122.789C204.938 123.06 205.164 123.286 205.435 123.286H210.62C210.891 123.286 211.117 123.06 211.117 122.789V117.604C211.117 117.333 210.891 117.107 210.62 117.107Z" fill="black" />
  <path d="M215.458 119.157H237.342" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M241.773 130.792H201.908C200.044 130.792 198.532 132.304 198.532 134.168V141.327C198.532 143.192 200.044 144.703 201.908 144.703H241.773C243.638 144.703 245.149 143.192 245.149 141.327V134.168C245.149 132.304 243.638 130.792 241.773 130.792Z" fill="#EFEFF1" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M205.435 135.027H210.62C210.62 135.027 210.74 135.088 210.74 135.148V140.333C210.74 140.333 210.68 140.453 210.62 140.453H205.435C205.435 140.453 205.314 140.393 205.314 140.333V135.148C205.314 135.148 205.375 135.027 205.435 135.027Z" fill="#F11653" />
  <path d="M210.363 135.404V140.076H205.691V135.404H210.363ZM210.62 134.65H205.435C205.164 134.65 204.938 134.877 204.938 135.148V140.333C204.938 140.604 205.164 140.83 205.435 140.83H210.62C210.891 140.83 211.117 140.604 211.117 140.333V135.148C211.117 134.877 210.891 134.65 210.62 134.65Z" fill="black" />
  <path d="M215.458 136.7H237.342" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M241.773 148.336H201.908C200.044 148.336 198.532 149.847 198.532 151.712V158.871C198.532 160.736 200.044 162.247 201.908 162.247H241.773C243.638 162.247 245.149 160.736 245.149 158.871V151.712C245.149 149.847 243.638 148.336 241.773 148.336Z" fill="#EFEFF1" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M205.435 152.571H210.62C210.62 152.571 210.74 152.631 210.74 152.692V157.876C210.74 157.876 210.68 157.997 210.62 157.997H205.435C205.435 157.997 205.314 157.937 205.314 157.876V152.692C205.314 152.692 205.375 152.571 205.435 152.571Z" fill="#F637E3" />
  <path d="M210.363 152.948V157.62H205.691V152.948H210.363ZM210.62 152.194H205.435C205.164 152.194 204.938 152.42 204.938 152.692V157.876C204.938 158.148 205.164 158.374 205.435 158.374H210.62C210.891 158.374 211.117 158.148 211.117 157.876V152.692C211.117 152.42 210.891 152.194 210.62 152.194Z" fill="black" />
  <path d="M215.458 154.244H237.342" stroke="black" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M167.047 166.784H159.315V174.516H167.047V166.784Z" fill="#EFEFF1" stroke="var(--primary-contrast)" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M261.035 80.271H253.303V88.0029H261.035V80.271Z" fill="#EFEFF1" stroke="var(--primary-contrast)" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M271.947 66.842H267.833V70.9566H271.947V66.842Z" fill="#EFEFF1" stroke="var(--primary-contrast)" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M140.852 183.785H136.737V187.9H140.852V183.785Z" fill="white" stroke="var(--primary-contrast)" stroke-width="0.93421" stroke-miterlimit="10" />
  <path d="M178.17 12.598H174.055V16.7127H178.17V12.598Z" fill="white" stroke="var(--primary-contrast)" stroke-width="0.93421" stroke-miterlimit="10" />
</svg>

      </div>
    </div>
    <p>应用使用表单户登录、更新个人资料、输入敏感信息以及执行许多其他数据录入任务。</p>
<p>Angular 提供了两种不同的方法来通过表单处理用户输入：响应式表单和模板驱动表单。
两者都可以从视图中捕获用户输入事件、验证用户输入、创建表单模型和数据模型以进行更新，并提供一种跟踪更改的方法。</p>
<p>本指南提供信息，以帮助你确定哪种类型的表单最适合你的情况。
它介绍了两种方法通用的构建块。
它还总结了这两种方法之间的主要区别，并在建立、数据流和测试的上下文中演示了这些差异。</p>

  <h2 id="choosing-an-approach">
    <a href="#choosing-an-approach" class="docs-anchor" tabindex="-1" aria-label="Link to Choosing an approach">选择一种方法</a>
  </h2>
  <p>响应式表单和模板驱动表单处理和管理表单数据的方式不同。
每种方法都提供了不同的优势。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">表单</th>
<th align="left">详情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">响应式表单</td>
<td align="left">提供对底层表单对象模型的直接、显式访问。与模板驱动表单相比，它们更健壮：它们具有更好的延展性、可复用性和可测试性。如果表单是你应用的关键部分，或者你已经在使用响应式模式来构建你的应用，请使用响应式表单。</td>
</tr>
<tr>
<td align="left">模板驱动表单</td>
<td align="left">依赖模板中的指令来创建和操纵底层的对象模型。它们对于向应用添加简单表单（例如电子邮件列表注册表单）很有用。它们可以轻松地添加到应用中，但它们的延展性不如响应式表单。如果你的表单需求和逻辑非常基本，并且可以完全在模板中管理，那么模板驱动表单可能是一个不错的选择。</td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h3 id="key-differences">
    <a href="#key-differences" class="docs-anchor" tabindex="-1" aria-label="Link to Key differences">主要区别</a>
  </h3>
  <p>下表总结了响应式表单和模板驱动表单之间的主要区别。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left"></th>
<th align="left">响应式</th>
<th align="left">模板驱动</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><a href="#setting-up-the-form-model">表单模型的建立</a></td>
<td align="left">显式的，在组件类中创建</td>
<td align="left">隐式的，由指令创建</td>
</tr>
<tr>
<td align="left"><a href="#mutability-of-the-data-model">数据模型</a></td>
<td align="left">结构化的和不可变的</td>
<td align="left">非结构化的和可变的</td>
</tr>
<tr>
<td align="left"><a href="#data-flow-in-forms">数据流</a></td>
<td align="left">同步的</td>
<td align="left">异步的</td>
</tr>
<tr>
<td align="left"><a href="#form-validation">表单验证</a></td>
<td align="left">函数</td>
<td align="left">指令</td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h3 id="scalability">
    <a href="#scalability" class="docs-anchor" tabindex="-1" aria-label="Link to Scalability">延展性</a>
  </h3>
  <p>如果表单是你应用的核心部分，那么延展性就非常重要。
能够跨组件复用表单模型至关重要。</p>
<p>响应式表单比模板驱动表单更具延展性。
它们提供对底层表单 API 的直接访问，并在视图和数据模型之间使用<a href="#data-flow-in-reactive-forms">同步数据流</a>，这使得创建大规模表单更容易。
响应式表单在测试方面需要的建立工作较少，并且测试不需要深入理解变更检测即可正确测试表单更新和验证。</p>
<p>模板驱动表单侧重于简单场景，并且可复用性不高。
它们抽象出了底层的表单 API，并在视图和数据模型之间使用<a href="#data-flow-in-template-driven-forms">异步数据流</a>。
模板驱动表单的抽象也会影响测试。
测试在很大程度上依赖于手动变更检测执行才能正确运行，并且需要更多的建立工作。</p>

  <h2 id="setting-up-the-form-model">
    <a href="#setting-up-the-form-model" class="docs-anchor" tabindex="-1" aria-label="Link to Setting up the form model">建立表单模型</a>
  </h2>
  <p>响应式表单和模板驱动表单都会跟踪用户与之交互的表单输入元素与组件模型中的表单数据之间的值变化。
这两种方法共享底层的构建块，但在你如何创建和管理通用的 FormControl 实例方面有所不同。</p>

  <h3 id="common-form-foundation-classes">
    <a href="#common-form-foundation-classes" class="docs-anchor" tabindex="-1" aria-label="Link to Common form foundation classes">通用表单基础类</a>
  </h3>
  <p>响应式表单和模板驱动表单都构建在以下基类之上。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">基类</th>
<th align="left">详情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left"><code>FormControl</code></td>
<td align="left">跟踪单个表单控件的值和验证状态。</td>
</tr>
<tr>
<td align="left"><code>FormGroup</code></td>
<td align="left">跟踪表单控件集合的相同值和状态。</td>
</tr>
<tr>
<td align="left"><code>FormArray</code></td>
<td align="left">跟踪表单控件数组的相同值和状态。</td>
</tr>
<tr>
<td align="left"><code>ControlValueAccessor</code></td>
<td align="left">在 Angular <code>FormControl</code> 实例和内置 DOM 元素之间创建桥梁。</td>
</tr>

      </tbody>
    </table>
  </div>
  
  <h3 id="setup-in-reactive-forms">
    <a href="#setup-in-reactive-forms" class="docs-anchor" tabindex="-1" aria-label="Link to Setup in reactive forms">在响应式表单中建立</a>
  </h3>
  <p>使用响应式表单，你可以直接在组件类中定义表单模型。
<code>[formControl]</code> 指令使用内部值访问器将显式创建的 <code>FormControl</code> 实例链接到视图中的特定表单元素。</p>
<p>以下组件使用响应式表单实现单个控件的输入字段。
在此范例中，表单模型是 <code>FormControl</code> 实例。</p>
<div class="docs-code" path="adev/src/content/examples/forms-overview/src/app/reactive/favorite-color/favorite-color.component.ts">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {Component} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {FormControl, ReactiveFormsModule} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/forms'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-reactive-favorite-color'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    Favorite Color: &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"text"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> [formControl]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"favoriteColorControl"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  imports: [ReactiveFormsModule],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FavoriteColorReactiveComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  favoriteColorControl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FormControl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span><span class="line"></span></code></pre>
    </pre>
  </div>
    <div class="docs-alert docs-alert-important">
    <p><strong>要点：</strong> 在响应式表单中，表单模型是事实之源；它通过 <code>&lt;input&gt;</code> 元素上的 <code>[formControl]</code> 指令，在任何给定时间点提供表单元素的值和状态。</p>

    </div>
    
  <h3 id="setup-in-template-driven-forms">
    <a href="#setup-in-template-driven-forms" class="docs-anchor" tabindex="-1" aria-label="Link to Setup in template-driven forms">在模板驱动表单中建立</a>
  </h3>
  <p>在模板驱动表单中，表单模型是隐式的，而不是显式的。
指令 <code>NgModel</code> 为给定的表单元素创建和管理 <code>FormControl</code> 实例。</p>
<p>以下组件使用模板驱动表单实现相同的单个控件的输入字段。</p>
<div class="docs-code" path="adev/src/content/examples/forms-overview/src/app/template/favorite-color/favorite-color.component.ts">
    
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {Component} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {FormsModule} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/forms'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">@</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  selector: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'app-template-favorite-color'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  template: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">`</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    Favorite Color: &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">input</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"text"</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> [(ngModel)]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">"favoriteColor"</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">  `</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">,</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  imports: [FormsModule],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">})</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FavoriteColorTemplateComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70">  favoriteColor</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> ''</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span><span class="line"></span></code></pre>
    </pre>
  </div>
    <div class="docs-alert docs-alert-important">
    <p><strong>要点：</strong> 在模板驱动表单中，事实之源是模板。<code>NgModel</code> 指令会自动为你管理 <code>FormControl</code> 实例。</p>

    </div>
    
  <h2 id="data-flow-in-forms">
    <a href="#data-flow-in-forms" class="docs-anchor" tabindex="-1" aria-label="Link to Data flow in forms">表单中的数据流</a>
  </h2>
  <p>当应用包含表单时，Angular 必须保持视图与组件模型同步，并保持组件模型与视图同步。
当用户通过视图更改值和进行选择时，新值必须反映在数据模型中。
同样，当程序逻辑更改数据模型中的值时，这些值必须反映在视图中。</p>
<p>响应式表单和模板驱动表单在处理来自用户或来自程序化更改的数据流的方式上有所不同。
以下图表使用上面定义的 favorite-color 输入字段，说明了每种类型的表单的两种数据流。</p>

  <h3 id="data-flow-in-reactive-forms">
    <a href="#data-flow-in-reactive-forms" class="docs-anchor" tabindex="-1" aria-label="Link to Data flow in reactive forms">响应式表单中的数据流</a>
  </h3>
  <p>在响应式表单中，视图中的每个表单元素都直接链接到表单模型（<code>FormControl</code> 实例）。
从视图到模型以及从模型到视图的更新是同步的，并且不依赖于 UI 的渲染方式。</p>
<p>“视图到模型”图演示了当输入字段的值从视图更改时，数据如何通过以下步骤流动。</p>

    <ol class="docs-ordered-list">
      <li>用户在输入元素中键入一个值，在本例中是喜欢的颜色 <em>Blue</em>。</li>
<li>表单输入元素发出一个包含最新值的 “input” 事件。</li>
<li>监听表单输入元素事件的 <code>ControlValueAccessor</code> 立即将新值中继到 <code>FormControl</code> 实例。</li>
<li><code>FormControl</code> 实例通过 <code>valueChanges</code> 可观察者发出新值。</li>
<li><code>valueChanges</code> 可观察者的任何订阅者都会收到新值。</li>

    </ol>
    <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 218.921875 666.46875" style="max-width: 218.921875px;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-generated-diagram .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span p{background-color:transparent;}#mermaid-generated-diagram .label text,#mermaid-generated-diagram span{fill:#333;color:#333;}#mermaid-generated-diagram .node rect,#mermaid-generated-diagram .node circle,#mermaid-generated-diagram .node ellipse,#mermaid-generated-diagram .node polygon,#mermaid-generated-diagram .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .rough-node .label text,#mermaid-generated-diagram .node .label text,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-anchor:middle;}#mermaid-generated-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-generated-diagram .rough-node .label,#mermaid-generated-diagram .node .label,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-align:center;}#mermaid-generated-diagram .node.clickable{cursor:pointer;}#mermaid-generated-diagram .root .anchor path{fill:#0b0b0b!important;stroke-width:0;stroke:#0b0b0b;}#mermaid-generated-diagram .arrowheadPath{fill:#0b0b0b;}#mermaid-generated-diagram .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#mermaid-generated-diagram .flowchart-link{stroke:#0b0b0b;fill:none;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#mermaid-generated-diagram .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-generated-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram rect.text{fill:none;stroke-width:0;}#mermaid-generated-diagram .icon-shape,#mermaid-generated-diagram .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .icon-shape p,#mermaid-generated-diagram .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#mermaid-generated-diagram .icon-shape rect,#mermaid-generated-diagram .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z" /></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" /></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" /></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_U_I_0" d="M109.961,98.969L109.878,105.052C109.794,111.135,109.628,123.302,109.544,134.885C109.461,146.469,109.461,157.469,109.461,162.969L109.461,168.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_CVA_0" d="M109.461,226.469L109.461,232.635C109.461,238.802,109.461,251.135,109.461,262.802C109.461,274.469,109.461,285.469,109.461,290.969L109.461,296.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CVA_FC_0" d="M109.461,354.469L109.461,362.635C109.461,370.802,109.461,387.135,109.461,402.802C109.461,418.469,109.461,433.469,109.461,440.969L109.461,448.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_FC_O_0" d="M109.461,506.469L109.461,514.635C109.461,522.802,109.461,539.135,109.461,554.802C109.461,570.469,109.461,585.469,109.461,592.969L109.461,600.469" /></g><g class="edgeLabels"><g transform="translate(109.4609375, 135.46875)" class="edgeLabel"><g transform="translate(-88.1796875, -12)" class="label"><foreignObject height="24" width="176.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Types in the input box</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 263.46875)" class="edgeLabel"><g transform="translate(-86.96875, -12)" class="label"><foreignObject height="24" width="173.9375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Fires the 'input' event</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 403.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Calls setValue() on the FormControl</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 555.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Fires a 'valueChanges' event to observers</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(109.4609375, 53.234375)" id="flowchart-U-0" class="node default"><polygon transform="translate(-45.234375,45.234375)" class="label-container" points="45.234375,0 90.46875,-45.234375 45.234375,-90.46875 0,-45.234375"></polygon><g transform="translate(-18.234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="36.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>User</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 199.46875)" id="flowchart-I-1" class="node default"><rect height="54" width="97.96875" y="-27" x="-48.984375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-33.984375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>&lt;input&gt;</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 327.46875)" id="flowchart-CVA-2" class="node default"><rect height="54" width="202.921875" y="-27" x="-101.4609375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-86.4609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="172.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ControlValueAccessor</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 479.46875)" id="flowchart-FC-3" class="node default"><rect height="54" width="128.140625" y="-27" x="-64.0703125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-49.0703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="98.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>FormControl</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 631.46875)" id="flowchart-O-4" class="node default"><rect height="54" width="111.734375" y="-27" x="-55.8671875" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-40.8671875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="81.734375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Observers</p></span></div></foreignObject></g></g></g></g></g></svg><p>“模型到视图”图演示了通过以下步骤，如何将对模型的程序化更改传播到视图。</p>

    <ol class="docs-ordered-list">
      <li>用户调用 <code>favoriteColorControl.setValue()</code> 方法，该方法会更新 <code>FormControl</code> 的值。</li>
<li><code>FormControl</code> 实例通过 <code>valueChanges</code> 可观察者发出新值。</li>
<li><code>valueChanges</code> 可观察者的任何订阅者都会收到新值。</li>
<li>表单输入元素上的控件值访问器使用新值更新该元素。</li>

    </ol>
    <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 437.4609375 562.46875" style="max-width: 437.4609375px;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-generated-diagram .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span p{background-color:transparent;}#mermaid-generated-diagram .label text,#mermaid-generated-diagram span{fill:#333;color:#333;}#mermaid-generated-diagram .node rect,#mermaid-generated-diagram .node circle,#mermaid-generated-diagram .node ellipse,#mermaid-generated-diagram .node polygon,#mermaid-generated-diagram .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .rough-node .label text,#mermaid-generated-diagram .node .label text,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-anchor:middle;}#mermaid-generated-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-generated-diagram .rough-node .label,#mermaid-generated-diagram .node .label,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-align:center;}#mermaid-generated-diagram .node.clickable{cursor:pointer;}#mermaid-generated-diagram .root .anchor path{fill:#0b0b0b!important;stroke-width:0;stroke:#0b0b0b;}#mermaid-generated-diagram .arrowheadPath{fill:#0b0b0b;}#mermaid-generated-diagram .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#mermaid-generated-diagram .flowchart-link{stroke:#0b0b0b;fill:none;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#mermaid-generated-diagram .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-generated-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram rect.text{fill:none;stroke-width:0;}#mermaid-generated-diagram .icon-shape,#mermaid-generated-diagram .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .icon-shape p,#mermaid-generated-diagram .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#mermaid-generated-diagram .icon-shape rect,#mermaid-generated-diagram .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z" /></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" /></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" /></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_U_FC_0" d="M219.961,98.969L219.878,107.052C219.794,115.135,219.628,131.302,219.544,146.885C219.461,162.469,219.461,177.469,219.461,184.969L219.461,192.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_FC_CVA_0" d="M180.382,250.469L168.562,258.635C156.742,266.802,133.101,283.135,121.281,298.802C109.461,314.469,109.461,329.469,109.461,336.969L109.461,344.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_FC_O_0" d="M258.54,250.469L270.36,258.635C282.18,266.802,305.821,283.135,317.641,298.802C329.461,314.469,329.461,329.469,329.461,336.969L329.461,344.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CVA_I_0" d="M109.461,402.469L109.461,410.635C109.461,418.802,109.461,435.135,109.461,450.802C109.461,466.469,109.461,481.469,109.461,488.969L109.461,496.469" /></g><g class="edgeLabels"><g transform="translate(219.4609375, 147.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Calls setValue() on the FormControl</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 299.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Notifies the ControlValueAccessor</p></span></div></foreignObject></g></g><g transform="translate(329.4609375, 299.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Fires a 'valueChanges' event to observers</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 451.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Updates the value of the &lt;input&gt;</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(219.4609375, 53.234375)" id="flowchart-U-0" class="node default"><polygon transform="translate(-45.234375,45.234375)" class="label-container" points="45.234375,0 90.46875,-45.234375 45.234375,-90.46875 0,-45.234375"></polygon><g transform="translate(-18.234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="36.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>User</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 527.46875)" id="flowchart-I-1" class="node default"><rect height="54" width="97.96875" y="-27" x="-48.984375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-33.984375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>&lt;input&gt;</p></span></div></foreignObject></g></g><g transform="translate(109.4609375, 375.46875)" id="flowchart-CVA-2" class="node default"><rect height="54" width="202.921875" y="-27" x="-101.4609375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-86.4609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="172.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ControlValueAccessor</p></span></div></foreignObject></g></g><g transform="translate(219.4609375, 223.46875)" id="flowchart-FC-3" class="node default"><rect height="54" width="128.140625" y="-27" x="-64.0703125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-49.0703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="98.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>FormControl</p></span></div></foreignObject></g></g><g transform="translate(329.4609375, 375.46875)" id="flowchart-O-4" class="node default"><rect height="54" width="111.734375" y="-27" x="-55.8671875" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-40.8671875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="81.734375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Observers</p></span></div></foreignObject></g></g></g></g></g></svg>
  <h3 id="data-flow-in-template-driven-forms">
    <a href="#data-flow-in-template-driven-forms" class="docs-anchor" tabindex="-1" aria-label="Link to Data flow in template-driven forms">模板驱动表单中的数据流</a>
  </h3>
  <p>在模板驱动表单中，每个表单元素都链接到一个在内部管理表单模型的指令。</p>
<p>“视图到模型”图演示了当输入字段的值从视图更改时，数据如何通过以下步骤流动。</p>

    <ol class="docs-ordered-list">
      <li>用户在输入元素中键入 <em>Blue</em>。</li>
<li>输入元素发出一个包含值 <em>Blue</em> 的 “input” 事件。</li>
<li>附着到输入的控件值访问器在 <code>FormControl</code> 实例上触发 <code>setValue()</code> 方法。</li>
<li><code>FormControl</code> 实例通过 <code>valueChanges</code> 可观察者发出新值。</li>
<li><code>valueChanges</code> 可观察者的任何订阅者都会收到新值。</li>
<li>控件值访问器还会调用 <code>NgModel.viewToModelUpdate()</code> 方法，该方法会发出 <code>ngModelChange</code> 事件。</li>
<li>由于组件模板对 <code>favoriteColor</code> 属性使用了双向数据绑定，因此组件中的 <code>favoriteColor</code> 属性会更新为 <code>ngModelChange</code> 事件 (<em>Blue</em>) 发出的值。</li>

    </ol>
    <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 436 842.46875" style="max-width: 436px;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-generated-diagram .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span p{background-color:transparent;}#mermaid-generated-diagram .label text,#mermaid-generated-diagram span{fill:#333;color:#333;}#mermaid-generated-diagram .node rect,#mermaid-generated-diagram .node circle,#mermaid-generated-diagram .node ellipse,#mermaid-generated-diagram .node polygon,#mermaid-generated-diagram .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .rough-node .label text,#mermaid-generated-diagram .node .label text,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-anchor:middle;}#mermaid-generated-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-generated-diagram .rough-node .label,#mermaid-generated-diagram .node .label,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-align:center;}#mermaid-generated-diagram .node.clickable{cursor:pointer;}#mermaid-generated-diagram .root .anchor path{fill:#0b0b0b!important;stroke-width:0;stroke:#0b0b0b;}#mermaid-generated-diagram .arrowheadPath{fill:#0b0b0b;}#mermaid-generated-diagram .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#mermaid-generated-diagram .flowchart-link{stroke:#0b0b0b;fill:none;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#mermaid-generated-diagram .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-generated-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram rect.text{fill:none;stroke-width:0;}#mermaid-generated-diagram .icon-shape,#mermaid-generated-diagram .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .icon-shape p,#mermaid-generated-diagram .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#mermaid-generated-diagram .icon-shape rect,#mermaid-generated-diagram .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z" /></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" /></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" /></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_U_I_0" d="M218.5,98.969L218.417,105.052C218.333,111.135,218.167,123.302,218.083,134.885C218,146.469,218,157.469,218,162.969L218,168.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_CVA_0" d="M218,226.469L218,232.635C218,238.802,218,251.135,218,262.802C218,274.469,218,285.469,218,290.969L218,296.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CVA_FC_0" d="M178.921,354.469L167.101,362.635C155.281,370.802,131.64,387.135,119.82,402.802C108,418.469,108,433.469,108,440.969L108,448.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_FC_O_0" d="M108,506.469L108,514.635C108,522.802,108,539.135,108,554.802C108,570.469,108,585.469,108,592.969L108,600.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CVA_M_0" d="M257.079,354.469L268.899,362.635C280.719,370.802,304.36,387.135,316.18,402.802C328,418.469,328,433.469,328,440.969L328,448.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_M_C_0" d="M328,506.469L328,514.635C328,522.802,328,539.135,328,554.802C328,570.469,328,585.469,328,592.969L328,600.469" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_P_0" d="M328,658.469L328,668.635C328,678.802,328,699.135,328,718.802C328,738.469,328,757.469,328,766.969L328,776.469" /></g><g class="edgeLabels"><g transform="translate(218, 135.46875)" class="edgeLabel"><g transform="translate(-88.1796875, -12)" class="label"><foreignObject height="24" width="176.359375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Types in the input box</p></span></div></foreignObject></g></g><g transform="translate(218, 263.46875)" class="edgeLabel"><g transform="translate(-86.96875, -12)" class="label"><foreignObject height="24" width="173.9375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Fires the 'input' event</p></span></div></foreignObject></g></g><g transform="translate(108, 403.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Calls setValue() on the FormControl</p></span></div></foreignObject></g></g><g transform="translate(108, 555.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Fires a 'valueChanges' event to observers</p></span></div></foreignObject></g></g><g transform="translate(328, 403.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Calls viewToModelUpdate()</p></span></div></foreignObject></g></g><g transform="translate(328, 555.46875)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Emits an ngModelChange event</p></span></div></foreignObject></g></g><g transform="translate(328, 719.46875)" class="edgeLabel"><g transform="translate(-100, -36)" class="label"><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Updates the value of the two-way bound property</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(218, 53.234375)" id="flowchart-U-0" class="node default"><polygon transform="translate(-45.234375,45.234375)" class="label-container" points="45.234375,0 90.46875,-45.234375 45.234375,-90.46875 0,-45.234375"></polygon><g transform="translate(-18.234375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="36.46875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>User</p></span></div></foreignObject></g></g><g transform="translate(218, 199.46875)" id="flowchart-I-1" class="node default"><rect height="54" width="97.96875" y="-27" x="-48.984375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-33.984375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>&lt;input&gt;</p></span></div></foreignObject></g></g><g transform="translate(218, 327.46875)" id="flowchart-CVA-2" class="node default"><rect height="54" width="202.921875" y="-27" x="-101.4609375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-86.4609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="172.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ControlValueAccessor</p></span></div></foreignObject></g></g><g transform="translate(108, 479.46875)" id="flowchart-FC-3" class="node default"><rect height="54" width="128.140625" y="-27" x="-64.0703125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-49.0703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="98.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>FormControl</p></span></div></foreignObject></g></g><g transform="translate(328, 479.46875)" id="flowchart-M-4" class="node default"><rect height="54" width="100.171875" y="-27" x="-50.0859375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-35.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="70.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>NgModel</p></span></div></foreignObject></g></g><g transform="translate(108, 631.46875)" id="flowchart-O-5" class="node default"><rect height="54" width="111.734375" y="-27" x="-55.8671875" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-40.8671875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="81.734375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Observers</p></span></div></foreignObject></g></g><g transform="translate(328, 631.46875)" id="flowchart-C-6" class="node default"><rect height="54" width="122.890625" y="-27" x="-61.4453125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-46.4453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="92.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Component</p></span></div></foreignObject></g></g><g transform="translate(328, 807.46875)" id="flowchart-P-7" class="node default"><rect height="54" width="163.15625" y="-27" x="-81.578125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-66.578125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="133.15625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Two-way binding</p></span></div></foreignObject></g></g></g></g></g></svg><p>“模型到视图”图演示了当 <code>favoriteColor</code> 从 <em>Blue</em> 更改为 <em>Red</em> 时，数据如何通过以下步骤从模型流向视图</p>

    <ol class="docs-ordered-list">
      <li><code>favoriteColor</code> 值在组件中更新。</li>
<li>变更检测开始。</li>
<li>在变更检测期间，由于 <code>NgModel</code> 指令实例的某个输入属性的值已更改，因此会在其上调用 <code>ngOnChanges</code> 生命周期钩子。</li>
<li><code>ngOnChanges()</code> 方法将一个异步任务加入队列，以便为内部 <code>FormControl</code> 实例设置值。</li>
<li>变更检测完成。</li>
<li>在下一个 tick 中，执行设置 <code>FormControl</code> 实例值的任务。</li>
<li><code>FormControl</code> 实例通过 <code>valueChanges</code> 可观察者发出最新值。</li>
<li><code>valueChanges</code> 可观察者的任何订阅者都会收到新值。</li>
<li>控件值访问器使用最新的 <code>favoriteColor</code> 值更新视图中的表单输入元素。</li>

    </ol>
    <svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 288.921875 1432" style="max-width: 288.921875px;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-generated-diagram"><style>#mermaid-generated-diagram{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}@keyframes edge-animation-frame{from{stroke-dashoffset:0;}}@keyframes dash{to{stroke-dashoffset:0;}}#mermaid-generated-diagram .edge-animation-slow{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 50s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .edge-animation-fast{stroke-dasharray:9,5!important;stroke-dashoffset:900;animation:dash 20s linear infinite;stroke-linecap:round;}#mermaid-generated-diagram .error-icon{fill:hsl(220.5882352941, 100%, 98.3333333333%);}#mermaid-generated-diagram .error-text{fill:rgb(8.5000000002, 5.7500000001, 0);stroke:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .edge-thickness-normal{stroke-width:1px;}#mermaid-generated-diagram .edge-thickness-thick{stroke-width:3.5px;}#mermaid-generated-diagram .edge-pattern-solid{stroke-dasharray:0;}#mermaid-generated-diagram .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-generated-diagram .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-generated-diagram .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-generated-diagram .marker{fill:#0b0b0b;stroke:#0b0b0b;}#mermaid-generated-diagram .marker.cross{stroke:#0b0b0b;}#mermaid-generated-diagram svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-generated-diagram p{margin:0;}#mermaid-generated-diagram .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-generated-diagram .cluster-label text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster-label span p{background-color:transparent;}#mermaid-generated-diagram .label text,#mermaid-generated-diagram span{fill:#333;color:#333;}#mermaid-generated-diagram .node rect,#mermaid-generated-diagram .node circle,#mermaid-generated-diagram .node ellipse,#mermaid-generated-diagram .node polygon,#mermaid-generated-diagram .node path{fill:#fff4dd;stroke:hsl(40.5882352941, 60%, 83.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .rough-node .label text,#mermaid-generated-diagram .node .label text,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-anchor:middle;}#mermaid-generated-diagram .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-generated-diagram .rough-node .label,#mermaid-generated-diagram .node .label,#mermaid-generated-diagram .image-shape .label,#mermaid-generated-diagram .icon-shape .label{text-align:center;}#mermaid-generated-diagram .node.clickable{cursor:pointer;}#mermaid-generated-diagram .root .anchor path{fill:#0b0b0b!important;stroke-width:0;stroke:#0b0b0b;}#mermaid-generated-diagram .arrowheadPath{fill:#0b0b0b;}#mermaid-generated-diagram .edgePath .path{stroke:#0b0b0b;stroke-width:2.0px;}#mermaid-generated-diagram .flowchart-link{stroke:#0b0b0b;fill:none;}#mermaid-generated-diagram .edgeLabel{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .edgeLabel p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .edgeLabel rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram .labelBkg{background-color:rgba(243.9999999999, 220.9999999998, 255, 0.5);}#mermaid-generated-diagram .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mermaid-generated-diagram .cluster text{fill:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram .cluster span{color:rgb(8.5000000002, 5.7500000001, 0);}#mermaid-generated-diagram div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(220.5882352941, 100%, 98.3333333333%);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mermaid-generated-diagram .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-generated-diagram rect.text{fill:none;stroke-width:0;}#mermaid-generated-diagram .icon-shape,#mermaid-generated-diagram .image-shape{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);text-align:center;}#mermaid-generated-diagram .icon-shape p,#mermaid-generated-diagram .image-shape p{background-color:hsl(-79.4117647059, 100%, 93.3333333333%);padding:2px;}#mermaid-generated-diagram .icon-shape rect,#mermaid-generated-diagram .image-shape rect{opacity:0.5;background-color:hsl(-79.4117647059, 100%, 93.3333333333%);fill:hsl(-79.4117647059, 100%, 93.3333333333%);}#mermaid-generated-diagram :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z" /></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z" /></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" /></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-generated-diagram_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9" /></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_P_0" d="M144.461,62L144.461,70.167C144.461,78.333,144.461,94.667,144.461,110.333C144.461,126,144.461,141,144.461,148.5L144.461,156" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_P_CD1_0" d="M144.461,238L144.461,244.167C144.461,250.333,144.461,262.667,144.461,274.333C144.461,286,144.461,297,144.461,302.5L144.461,308" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CD1_CD2_0" d="M144.461,618L144.461,628.167C144.461,638.333,144.461,658.667,144.461,678.333C144.461,698,144.461,717,144.461,726.5L144.461,736" /></g><g class="edgeLabels"><g transform="translate(144.4609375, 111)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Updates the property value</p></span></div></foreignObject></g></g><g transform="translate(144.4609375, 275)" class="edgeLabel"><g transform="translate(-46.046875, -12)" class="label"><foreignObject height="24" width="92.09375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Triggers CD</p></span></div></foreignObject></g></g><g transform="translate(144.4609375, 679)" class="edgeLabel"><g transform="translate(-100, -36)" class="label"><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Async actions trigger a second round of Change Detection</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(0, 732)" class="root"><g class="clusters"><g data-look="classic" id="CD2" class="cluster"><rect height="684" width="272.921875" y="8" x="8" style=""></rect><g transform="translate(44.4609375, 8)" class="cluster-label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Second Change Detection</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-dotted edge-thickness-normal edge-pattern-solid flowchart-link" id="L_FC2_O_0" d="M144.461,99.5L144.461,109.75C144.461,120,144.461,140.5,144.461,160.333C144.461,180.167,144.461,199.333,144.461,208.917L144.461,218.5" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_O_CVA_0" d="M144.461,276.5L144.461,288.75C144.461,301,144.461,325.5,144.461,349.333C144.461,373.167,144.461,396.333,144.461,407.917L144.461,419.5" /><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_CVA_I_0" d="M144.461,477.5L144.461,487.75C144.461,498,144.461,518.5,144.461,538.333C144.461,558.167,144.461,577.333,144.461,586.917L144.461,596.5" /></g><g class="edgeLabels"><g transform="translate(144.4609375, 161)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Fires a 'valueChanges' event to observers</p></span></div></foreignObject></g></g><g transform="translate(144.4609375, 350)" class="edgeLabel"><g transform="translate(-100, -36)" class="label"><foreignObject height="72" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>ControlValueAccessor receives valueChanges event</p></span></div></foreignObject></g></g><g transform="translate(144.4609375, 539)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Sets the value in the control</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(144.4609375, 72.5)" id="flowchart-FC2-12" class="node default"><rect height="54" width="128.140625" y="-27" x="-64.0703125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-49.0703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="98.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>FormControl</p></span></div></foreignObject></g></g><g transform="translate(144.4609375, 249.5)" id="flowchart-O-13" class="node default"><rect height="54" width="111.734375" y="-27" x="-55.8671875" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-40.8671875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="81.734375"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Observers</p></span></div></foreignObject></g></g><g transform="translate(144.4609375, 450.5)" id="flowchart-CVA-14" class="node default"><rect height="54" width="202.921875" y="-27" x="-101.4609375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-86.4609375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="172.921875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>ControlValueAccessor</p></span></div></foreignObject></g></g><g transform="translate(144.4609375, 627.5)" id="flowchart-I-15" class="node default"><rect height="54" width="97.96875" y="-27" x="-48.984375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-33.984375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.96875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>&lt;input&gt;</p></span></div></foreignObject></g></g></g></g><g transform="translate(16.4609375, 304)" class="root"><g class="clusters"><g data-look="classic" id="CD1" class="cluster"><rect height="306" width="240" y="8" x="8" style=""></rect><g transform="translate(36.5859375, 8)" class="cluster-label"><foreignObject height="24" width="182.828125"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>First Change Detection</p></span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#mermaid-generated-diagram_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_M_FC_0" d="M128,99.5L128,109.75C128,120,128,140.5,128,160.333C128,180.167,128,199.333,128,208.917L128,218.5" /></g><g class="edgeLabels"><g transform="translate(128, 161)" class="edgeLabel"><g transform="translate(-100, -24)" class="label"><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" class="labelBkg" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"><p>Asynchronously sets FormControl value</p></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(128, 72.5)" id="flowchart-M-6" class="node default"><rect height="54" width="100.171875" y="-27" x="-50.0859375" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-35.0859375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="70.171875"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>NgModel</p></span></div></foreignObject></g></g><g transform="translate(128, 249.5)" id="flowchart-FC-7" class="node default"><rect height="54" width="128.140625" y="-27" x="-64.0703125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-49.0703125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="98.140625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>FormControl</p></span></div></foreignObject></g></g></g></g><g transform="translate(144.4609375, 35)" id="flowchart-C-0" class="node default"><rect height="54" width="122.890625" y="-27" x="-61.4453125" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-46.4453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="92.890625"><div style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Component</p></span></div></foreignObject></g></g><g transform="translate(144.4609375, 199)" id="flowchart-P-1" class="node default"><rect height="78" width="230" y="-39" x="-115" ry="5" rx="5" style="" class="basic label-container"></rect><g transform="translate(-100, -24)" style="" class="label"><rect></rect><foreignObject height="48" width="200"><div style="display: table; white-space: break-spaces; line-height: 1.5; max-width: 200px; text-align: center; width: 200px;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel"><p>Property bound to NgModel</p></span></div></foreignObject></g></g></g></g></g></svg>
    <div class="docs-alert docs-alert-note">
    <p><strong>注意：</strong> <code>NgModel</code> 触发第二次变更检测以避免 <code>ExpressionChangedAfterItHasBeenChecked</code> 错误，因为值更改源于输入属性绑定。</p>

    </div>
    
  <h3 id="mutability-of-the-data-model">
    <a href="#mutability-of-the-data-model" class="docs-anchor" tabindex="-1" aria-label="Link to Mutability of the data model">数据模型的易变性</a>
  </h3>
  <p>变更跟踪方法在你的应用的效率中起着作用。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">表单</th>
<th align="left">详情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">响应式表单</td>
<td align="left">通过将数据模型作为不可变数据结构提供，来保持数据模型的纯净性。每次在数据模型上触发更改时，<code>FormControl</code> 实例都会返回一个新的数据模型，而不是更新现有的数据模型。这使你能够通过控件的可观察者跟踪数据模型的唯一更改。变更检测效率更高，因为它只需要更新唯一更改。由于数据更新遵循响应式模式，因此你可以与可观察者操作符集成以转换数据。</td>
</tr>
<tr>
<td align="left">模板驱动表单</td>
<td align="left">依靠易变性和双向数据绑定，以便在模板中进行更改时更新组件中的数据模型。由于在使用双向数据绑定时，数据模型上没有唯一的更改要跟踪，因此变更检测在确定何时需要更新时效率较低。</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>前面的示例演示了使用 favorite-color 输入元素时的区别。</p>

  <ul class="docs-list">
    <li>对于响应式表单，当控件的值更新时，<strong><code>FormControl</code> 实例</strong> 始终返回一个新值</li>
<li>对于模板驱动表单，<strong>favorite color 属性</strong> 始终被修改为其新值</li>

  </ul>
  
  <h2 id="form-validation">
    <a href="#form-validation" class="docs-anchor" tabindex="-1" aria-label="Link to Form validation">表单验证</a>
  </h2>
  <p>验证是管理任何表单集合不可或缺的一部分。
无论你是检查必填字段还是查询外部 API 以获取现有用户名，Angular 都提供了一组内置验证器以及创建自定义验证器的能力。</p>

  <div class="docs-table docs-scroll-track-transparent">
    <table>
      <thead>
        <tr>
<th align="left">表单</th>
<th align="left">详情</th>
</tr>

      </thead>
      <tbody>
        <tr>
<td align="left">响应式表单</td>
<td align="left">将自定义验证器定义为接收要验证的控件的<strong>函数</strong></td>
</tr>
<tr>
<td align="left">模板驱动表单</td>
<td align="left">绑定到模板<strong>指令</strong>，并且必须提供包装验证函数的自定义验证器指令</td>
</tr>

      </tbody>
    </table>
  </div>
  <p>欲知详情，请参阅 <a href="guide/forms/form-validation#validating-input-in-reactive-forms">表单验证</a>。</p>

  <h2 id="testing">
    <a href="#testing" class="docs-anchor" tabindex="-1" aria-label="Link to Testing">测试</a>
  </h2>
  <p>测试在复杂的应用中起着重要作用。
当验证你的表单是否正常工作时，更简单的测试策略很有用。
响应式表单和模板驱动表单在依赖渲染 UI 以基于表单控件和表单字段更改执行断言方面，具有不同的级别。
以下示例演示了使用响应式表单和模板驱动表单测试表单的过程。</p>

  <h3 id="testing-reactive-forms">
    <a href="#testing-reactive-forms" class="docs-anchor" tabindex="-1" aria-label="Link to Testing reactive forms">测试响应式表单</a>
  </h3>
  <p>响应式表单提供了一种相对简单的测试策略，因为它们提供对表单和数据模型的同步访问，并且可以在不渲染 UI 的情况下进行测试。
在这些测试中，状态和数据通过控件进行查询和操纵，而无需与变更检测周期交互。</p>
<p>以下测试使用前面示例中的 favorite-color 组件来验证响应式表单的“视图到模型”和“模型到视图”数据流。</p>
<!--todo: make consistent with other topics -->


  <h4 id="verifying-view-to-model-data-flow">
    <a href="#verifying-view-to-model-data-flow" class="docs-anchor" tabindex="-1" aria-label="Link to Verifying view-to-model data flow">验证“视图到模型”数据流</a>
  </h4>
  <p>第一个示例执行以下步骤来验证“视图到模型”数据流。</p>

    <ol class="docs-ordered-list">
      <li>查询视图以获取表单输入元素，并为测试创建一个自定义的 "input" 事件。</li>
<li>将输入框的新值设置为 <em>Red</em>，并在表单输入元素上触发 "input" 事件。</li>
<li>断言组件的 <code>favoriteColorControl</code> 值与输入中的值匹配。</li>

    </ol>
    <div class="docs-code" path="adev/src/content/examples/forms-overview/src/app/reactive/favorite-color/favorite-color.component.spec.ts" visiblelines="25,26,27,28,29,30,31,32,33" header="Favorite color test - view to model">
    <div class="docs-code-header"><h3>最喜欢的颜色测试 - 视图到模型</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {ComponentFixture, TestBed, waitForAsync} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core/testing'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {createNewEvent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../../shared/utils'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {FavoriteColorReactiveComponent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './favorite-color.component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">describe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Favorite Color Component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> component</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FavoriteColorReactiveComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ComponentFixture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">FavoriteColorReactiveComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">waitForAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    TestBed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">configureTestingModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      declarations: [FavoriteColorReactiveComponent],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">compileComponents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }));</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TestBed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FavoriteColorReactiveComponent);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.componentInstance;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should create'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(component).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBeTruthy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should update the value of the input field'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createNewEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    input.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'Red'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    input.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dispatchEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(event);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fixture.componentInstance.favoriteColorControl.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Red'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should update the value in the control'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component.favoriteColorControl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Blue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(input.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Blue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"></span></code></pre>
    </pre>
  </div><p>下面的例子执行以下步骤来验证模型到视图的数据流。</p>

    <ol class="docs-ordered-list">
      <li>使用 <code>favoriteColorControl</code>，一个 <code>FormControl</code> 实例，来设置新值。</li>
<li>查询视图以获取表单输入元素。</li>
<li>断言在控件上设置的新值与输入框中的值相匹配。</li>

    </ol>
    <div class="docs-code" path="adev/src/content/examples/forms-overview/src/app/reactive/favorite-color/favorite-color.component.spec.ts" visiblelines="35,36,37,38,39,40,41" header="Favorite color test - model to view">
    <div class="docs-code-header"><h3>最喜欢的颜色测试 - 模型到视图</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {ComponentFixture, TestBed, waitForAsync} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core/testing'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {createNewEvent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../../shared/utils'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {FavoriteColorReactiveComponent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './favorite-color.component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">describe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Favorite Color Component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> component</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FavoriteColorReactiveComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ComponentFixture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">FavoriteColorReactiveComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">waitForAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    TestBed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">configureTestingModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      declarations: [FavoriteColorReactiveComponent],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">compileComponents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }));</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TestBed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FavoriteColorReactiveComponent);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.componentInstance;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should create'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(component).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBeTruthy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should update the value of the input field'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createNewEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    input.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'Red'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    input.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dispatchEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(event);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(fixture.componentInstance.favoriteColorControl.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Red'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should update the value in the control'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component.favoriteColorControl.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">setValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Blue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(input.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Blue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"></span></code></pre>
    </pre>
  </div>
  <h3 id="testing-template-driven-forms">
    <a href="#testing-template-driven-forms" class="docs-anchor" tabindex="-1" aria-label="Link to Testing template-driven forms">测试模板驱动表单</a>
  </h3>
  <p>使用模板驱动表单编写测试需要详细了解变更检测过程，并理解指令如何在每个周期运行，以确保在正确的时间查询、测试或更改元素。</p>
<p>以下测试使用前面提到的 favorite color 组件来验证模板驱动表单从视图到模型以及从模型到视图的数据流。</p>
<p>以下测试验证从视图到模型的数据流。</p>
<div class="docs-code" path="adev/src/content/examples/forms-overview/src/app/template/favorite-color/favorite-color.component.spec.ts" visiblelines="37,38,39,40,41,42,43,44,45,46,47" header="Favorite color test - view to model">
    <div class="docs-code-header"><h3>最喜欢的颜色测试 - 视图到模型</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {ComponentFixture, fakeAsync, TestBed, tick, waitForAsync} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core/testing'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {createNewEvent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../../shared/utils'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {FavoriteColorTemplateComponent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './favorite-color.component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">describe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'FavoriteColorComponent'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> component</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FavoriteColorTemplateComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ComponentFixture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">FavoriteColorTemplateComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">waitForAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    TestBed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">configureTestingModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      declarations: [FavoriteColorTemplateComponent],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">compileComponents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }));</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TestBed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FavoriteColorTemplateComponent);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.componentInstance;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should create'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(component).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBeTruthy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should update the favorite color on the input field'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fakeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component.favoriteColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'Blue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    tick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(input.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Blue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }));</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should update the favorite color in the component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fakeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createNewEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    input.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'Red'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    input.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dispatchEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(event);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(component.favoriteColor).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Red'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }));</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"></span></code></pre>
    </pre>
  </div><p>以下是从视图到模型测试中执行的步骤。</p>

    <ol class="docs-ordered-list">
      <li>查询视图以获取表单输入元素，并为测试创建一个自定义的 "input" 事件。</li>
<li>将输入框的新值设置为 <em>Red</em>，并在表单输入元素上触发 "input" 事件。</li>
<li>通过测试夹具运行变更检测。</li>
<li>断言组件 <code>favoriteColor</code> 属性（Property）值与输入框中的值相匹配。</li>

    </ol>
    <p>以下测试验证从模型到视图的数据流。</p>
<div class="docs-code" path="adev/src/content/examples/forms-overview/src/app/template/favorite-color/favorite-color.component.spec.ts" visiblelines="25,26,27,28,29,30,31,32,33,34,35" header="Favorite color test - model to view">
    <div class="docs-code-header"><h3>最喜欢的颜色测试 - 模型到视图</h3></div>
    <pre class="docs-mini-scroll-track">      <pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {ComponentFixture, fakeAsync, TestBed, tick, waitForAsync} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '@angular/core/testing'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {createNewEvent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> '../../shared/utils'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {FavoriteColorTemplateComponent} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> './favorite-color.component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">describe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'FavoriteColorComponent'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> component</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> FavoriteColorTemplateComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> ComponentFixture</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">FavoriteColorTemplateComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">waitForAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    TestBed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">configureTestingModule</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">({</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">      declarations: [FavoriteColorTemplateComponent],</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    }).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">compileComponents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }));</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  beforeEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> TestBed.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">createComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(FavoriteColorTemplateComponent);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.componentInstance;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should create'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(component).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBeTruthy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  });</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should update the favorite color on the input field'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fakeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    component.favoriteColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'Blue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    tick</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(input.value).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toBe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Blue'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }));</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">  it</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'should update the favorite color in the component'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">fakeAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> {</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> input</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> fixture.nativeElement.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF"> event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> createNewEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'input'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    input.value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF"> 'Red'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    input.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">dispatchEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(event);</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    fixture.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">detectChanges</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">();</span></span><span class="line"></span><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">    expect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(component.favoriteColor).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0">toEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF">'Red'</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">);</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">  }));</span></span><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">});</span></span><span class="line"></span></code></pre>
    </pre>
  </div><p>以下是从模型到视图测试中执行的步骤。</p>

    <ol class="docs-ordered-list">
      <li>使用组件实例来设置 <code>favoriteColor</code> 属性（Property）的值。</li>
<li>通过测试夹具运行变更检测。</li>
<li>使用 <code>tick()</code> 方法来模拟 <code>fakeAsync()</code> 任务中时间的推移。</li>
<li>查询视图以获取表单输入元素。</li>
<li>断言输入值与组件实例中 <code>favoriteColor</code> 属性（Property）的值相匹配。</li>

    </ol>
    
  <h2 id="next-steps">
    <a href="#next-steps" class="docs-anchor" tabindex="-1" aria-label="Link to Next steps">后续步骤</a>
  </h2>
  <p>要了解有关响应式表单的更多信息，请参阅以下指南：</p>

    <nav class="docs-pill-row">
      
    <a class="docs-pill" href="guide/forms/reactive-forms">
      响应式表单
    </a>
    
    <a class="docs-pill" href="guide/forms/form-validation#validating-input-in-reactive-forms">
      表单验证
    </a>
    
    <a class="docs-pill" href="guide/forms/dynamic-forms">
      动态表单
    </a>
    

    </nav>
    <p>要了解有关模板驱动表单的更多信息，请参阅以下指南：</p>

    <nav class="docs-pill-row">
      
    <a class="docs-pill" href="guide/forms/template-driven-forms">
      模板驱动表单教程
    </a>
    
    <a class="docs-pill" href="guide/forms/form-validation#validating-input-in-template-driven-forms">
      表单验证
    </a>
    
    <a class="docs-pill" href="api/forms/NgForm">
      NgForm 指令 API 参考
    </a>
    

    </nav>
    