import {w,o as ot,k as kk,aN as ps,aO as uk,aP as Qe,bk as pe$1,a_ as Me,bj as $c,bl as z,bm as K,bn as J,bo as Xe,bp as ut,V as Vk,a as Cw,u as uR,j as dR,aE as R,c as ck,an as OR,d as Zr,b as Vn,bc as ak,bq as vn,br as $p,bs as xe,bt as dt,bi as Uc,bu as Ih,bv as Le,bw as Ph,b0 as nl,bx as sl,by as U,aD as Bk,am as RR,bz as Uk,_ as _p,C as CE,h as Tp,D as Dk,be as uw,Y as Yk,E as QE,A as dw}from'./main-BP72IIBJ.js';function ne(e,i){e&1&&Cw(0,"div",3);}function se(e,i){e&1&&(_p(0,"div",4),Cw(1,"div",5),Tp());}var ie={min:8,max:100,speed:200,debounceTime:0,trickleSpeed:300,fadeOutSpeed:50,relative:false,flat:false,spinner:false,direction:"ltr+",spinnerPosition:"right",trickleFunc:e=>e>=0&&e<20?10:e>=20&&e<50?4:e>=50&&e<80?2:e>=80&&e<99?.5:0},ee=new R("NG_PROGRESS_OPTIONS",{providedIn:"root",factory:()=>ie});var v=function(e){return e.START="START",e.COMPLETE="COMPLETE",e}(v||{});function oe(e){let i=OR(e)||0;return i<100&&i>=0?i:0}function ae(e){let i=OR(e)||100;return i>0&&i<=100?i:100}var l=(()=>{class e{constructor(){this.defaultOptions=w(ee),this.min=ck(this.defaultOptions.min,{transform:oe}),this.max=ck(this.defaultOptions.max,{transform:ae}),this.speed=ck(this.defaultOptions.speed,{transform:OR}),this.trickleSpeed=ck(this.defaultOptions.trickleSpeed,{transform:OR}),this.fadeOutSpeed=ck(this.defaultOptions.fadeOutSpeed,{transform:OR}),this.debounceTime=ck(this.defaultOptions.debounceTime,{transform:OR}),this.trickleFunc=ck(this.defaultOptions.trickleFunc),this.config=Zr(()=>({max:this.max(),min:this.min(),speed:this.speed(),trickleSpeed:this.trickleSpeed(),fadeOutSpeed:this.fadeOutSpeed(),trickleFunc:this.trickleFunc(),debounceTime:this.debounceTime()})),this._progress=Vn(0),this._active=Vn(false),this.active=Zr(()=>this._active()),this.progress=Zr(()=>this._progress()),this.started=ak(),this.completed=ak(),this._trigger=new vn(null);let t;$p(r=>{let n=this.config();xe(()=>{t=this._trigger.pipe(Qe(P=>!!P),$c(P=>P===v.START?dt(n.debounceTime).pipe($c(()=>this.onTrickling(n))):this.onComplete(n))).subscribe(),r(()=>t?.unsubscribe());});});}start(){this.started.emit(),this._trigger.next(v.START),this._active.set(true);}complete(){this._trigger.next(v.COMPLETE);}inc(t){let r=this.progress();this.active()?(typeof t!="number"&&(t=this.config().trickleFunc(r)),this.set(r+t)):this.start();}set(t){this._active.set(true),this._progress.set(this.clamp(t));}clamp(t){return Math.max(this.config().min,Math.min(this.config().max,t))}onTrickling(t){return this.active()||this.set(t.min),dt(0,t.trickleSpeed).pipe(Uc(()=>this.inc()))}onComplete(t){return this.active()?(this.completed.emit(),Ih({}).pipe(Uc(()=>this._progress.set(100)),Ph(t.speed+140),Uc(()=>this._active.set(false)),Ph(t.fadeOutSpeed),nl(()=>this._progress.set(0)),sl(U(this.started)))):Le}static{this.\u0275fac=function(r){return new(r||e)};}static{this.\u0275dir=Bk({type:e,selectors:[["","ngProgressRef",""]],inputs:{min:[1,"min"],max:[1,"max"],speed:[1,"speed"],trickleSpeed:[1,"trickleSpeed"],fadeOutSpeed:[1,"fadeOutSpeed"],debounceTime:[1,"debounceTime"],trickleFunc:[1,"trickleFunc"]},outputs:{started:"started",completed:"completed"},exportAs:["ngProgressRef"]});}}return e})(),te=(()=>{class e{constructor(){this.config=w(ee),this.progressRef=w(l,{host:true,self:true}),this.flat=ck(this.config.flat,{transform:RR}),this.spinner=ck(this.config.spinner,{transform:RR}),this.relative=ck(this.config.relative,{transform:RR}),this.spinnerPosition=ck(this.config.spinnerPosition),this.direction=ck(this.config.direction),this.progressTransform=Zr(()=>`translate3d(${this.progressRef.progress()}%,0,0)`);}static{this.\u0275fac=function(r){return new(r||e)};}static{this.\u0275cmp=Vk({type:e,selectors:[["ng-progress"]],hostAttrs:["role","progressbar"],hostVars:12,hostBindings:function(r,n){r&2&&(QE("spinnerPosition",n.spinnerPosition())("direction",n.direction()),uw("--_ng-progress-speed",n.progressRef.speed()+"ms")("--_ng-progress-fade-out-speed",n.progressRef.fadeOutSpeed()+"ms"),dw("ng-progress-bar",true)("ng-progress-bar-active",n.progressRef.active())("ng-progress-bar-relative",n.relative()));},inputs:{flat:[1,"flat"],spinner:[1,"spinner"],relative:[1,"relative"],spinnerPosition:[1,"spinnerPosition"],direction:[1,"direction"]},exportAs:["ngProgress"],features:[Uk([{directive:l,inputs:["min","min","max","max","speed","speed","trickleSpeed","trickleSpeed","fadeOutSpeed","fadeOutSpeed","debounceTime","debounceTime"],outputs:["started","started","completed","completed"]}])],decls:5,vars:4,consts:[[1,"ng-progress-bar-wrapper"],[1,"ng-bar-placeholder"],[1,"ng-bar"],[1,"ng-meteor"],[1,"ng-spinner"],[1,"ng-spinner-icon"]],template:function(r,n){r&1&&(_p(0,"div",0)(1,"div",1)(2,"div",2),CE(3,ne,1,0,"div",3),Tp()(),CE(4,se,2,0,"div",4),Tp()),r&2&&(Dk(2),uw("transform",n.progressTransform()),Dk(),Yk(n.flat()?-1:3),Dk(),Yk(n.spinner()?4:-1));},styles:['[_nghost-%COMP%]{--_ng-progress-thickness: var(--ng-progress-thickness, 2);--_ng-progress-thickness-px: calc(var(--_ng-progress-thickness) * 1px);--_ng-progress-thickness-add-one: calc(var(--_ng-progress-thickness) + 1);--_ng-progress-meteor-position-px: calc(var(--_ng-progress-thickness-add-one) * -1px);--_ng-progress-color: var(--ng-progress-color, #1B95E0);--_ng-progress-holder-color: var(--ng-progress-holder-color, transparent);--_ng-progress-ease: var(--ng-progress-ease, linear);--_ng-progress-spinner-thickness: var(--ng-progress-spinner-thickness, 2);--_ng-progress-spinner-thickness-px: calc(var(--_ng-progress-spinner-thickness) * 1px);--_ng-progress-spinner-spacing: var(--ng-progress-spinner-spacing, 15);--_ng-progress-spinner-spacing-px: calc(var(--_ng-progress-spinner-spacing) * 1px);--_ng-progress-spinner-size: var(--ng-progress-spinner-size, 18);--_ng-progress-spinner-size-px: calc(var(--_ng-progress-spinner-size) * 1px);--_ng-progress-spinner-speed: var(--ng-progress-spinner-speed, .25s);z-index:999999;pointer-events:none}.ng-progress-bar-active[_nghost-%COMP%]   .ng-progress-bar-wrapper[_ngcontent-%COMP%]{filter:alpha(opacity=100);opacity:1;transition:none}.ng-progress-bar-active[_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%]{transition:all var(--_ng-progress-speed) var(--_ng-progress-ease)}.ng-progress-bar-relative[_nghost-%COMP%]   .ng-progress-bar-wrapper[_ngcontent-%COMP%]{position:relative}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=ltr-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{rotate:calc(var(--_ng-progress-thickness-add-one) * 1deg)}[direction="ltr+"][_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-bar[_ngcontent-%COMP%]{margin-left:-100%}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{right:0}[direction="ltr+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=rtl-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{top:var(--_ng-progress-meteor-position-px)}[direction=ltr-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{bottom:var(--_ng-progress-meteor-position-px)}[direction=ltr-][_nghost-%COMP%]   .ng-bar-placeholder[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-bar-placeholder[_ngcontent-%COMP%]{transform:rotate(180deg)}[direction=ltr-][_nghost-%COMP%]   .ng-spinner-icon[_ngcontent-%COMP%], [direction="rtl+"][_nghost-%COMP%]   .ng-spinner-icon[_ngcontent-%COMP%]{animation-direction:reverse}[direction="rtl+"][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%], [direction=rtl-][_nghost-%COMP%]   .ng-meteor[_ngcontent-%COMP%]{rotate:calc(var(--_ng-progress-thickness-add-one) * -1deg)}[_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{top:var(--_ng-progress-spinner-spacing-px)}[spinnerPosition=left][_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{left:var(--_ng-progress-spinner-spacing-px)}[spinnerPosition=right][_nghost-%COMP%]   .ng-spinner[_ngcontent-%COMP%]{right:var(--_ng-progress-spinner-spacing-px)}.ng-progress-bar-wrapper[_ngcontent-%COMP%]{position:fixed;z-index:999999;top:0;left:0;width:100%;transform:scale(1);filter:alpha(opacity=0);opacity:0;transition:opacity var(--_ng-progress-fade-out-speed) linear}.ng-bar-placeholder[_ngcontent-%COMP%]{position:absolute;height:var(--_ng-progress-thickness-px);width:100%}.ng-bar[_ngcontent-%COMP%]{width:100%;height:100%;transform:translate(-100%,0,0);background:var(--_ng-progress-color)}.ng-meteor[_ngcontent-%COMP%]{display:block;position:absolute;width:100px;height:100%;opacity:1;box-shadow:0 0 10px var(--_ng-progress-color),0 0 5px var(--_ng-progress-color)}.ng-spinner[_ngcontent-%COMP%]{position:absolute;display:block;z-index:1031;top:10px}.ng-spinner-icon[_ngcontent-%COMP%]{box-sizing:border-box;animation:_ngcontent-%COMP%_spinner-animation var(--_ng-progress-spinner-speed) linear infinite;border-style:solid;border-color:transparent;border-radius:50%;border-top-color:var(--_ng-progress-color);border-left-color:var(--_ng-progress-color);width:var(--_ng-progress-spinner-size-px);height:var(--_ng-progress-spinner-size-px);border-width:var(--_ng-progress-spinner-thickness-px)}@keyframes _ngcontent-%COMP%_spinner-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}'],changeDetection:0});}}return e})();var pe=30,ke=(()=>{class e{router=w(ot);progressBar=kk.required(l);isBrowser=ps(w(uk));ngOnInit(){this.setupPageNavigationDimming();}setupPageNavigationDimming(){this.isBrowser&&this.router.events.pipe(Qe(t=>t instanceof pe$1),Me(()=>setTimeout(()=>{this.progressBar().start();},pe)),$c(t=>this.router.events.pipe(Qe(r=>r instanceof z||r instanceof K||r instanceof J||r instanceof Xe),ut(1),Me(()=>t)))).subscribe(t=>{clearTimeout(t),this.progressBar().complete();});}static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Vk({type:e,selectors:[["adev-progress-bar"]],viewQuery:function(r,n){r&1&&uR(n.progressBar,l,5),r&2&&dR();},decls:1,vars:0,consts:[["aria-label","\u9875\u9762\u52A0\u8F7D\u8FDB\u5EA6"]],template:function(r,n){r&1&&Cw(0,"ng-progress",0);},dependencies:[te],encapsulation:2,changeDetection:0})}return e})();export{pe as PROGRESS_BAR_DELAY,ke as ProgressBarComponent};